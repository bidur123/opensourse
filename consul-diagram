<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net" modified="2025-06-10T00:00:00.000Z" agent="Claude" etag="consul-architecture" version="24.7.17">
  <diagram name="Consul Architecture" id="consul-arch">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1200" pageHeight="800" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- AWS Region -->
        <mxCell id="aws-region" value="AWS US-East-2 Region" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;fontSize=16;fontStyle=1;verticalAlign=top;spacingTop=10;" vertex="1" parent="1">
          <mxGeometry x="50" y="50" width="1100" height="700" as="geometry" />
        </mxCell>
        
        <!-- VPC -->
        <mxCell id="vpc" value="VPC" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=14;fontStyle=1;verticalAlign=top;spacingTop=10;" vertex="1" parent="1">
          <mxGeometry x="80" y="100" width="1040" height="620" as="geometry" />
        </mxCell>
        
        <!-- Availability Zone 2a -->
        <mxCell id="az-2a" value="AZ-2a" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f8ff;strokeColor=#4a90e2;fontSize=12;fontStyle=1;verticalAlign=top;spacingTop=10;" vertex="1" parent="1">
          <mxGeometry x="110" y="150" width="480" height="280" as="geometry" />
        </mxCell>
        
        <!-- Availability Zone 2b -->
        <mxCell id="az-2b" value="AZ-2b" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f8ff;strokeColor=#4a90e2;fontSize=12;fontStyle=1;verticalAlign=top;spacingTop=10;" vertex="1" parent="1">
          <mxGeometry x="630" y="150" width="480" height="280" as="geometry" />
        </mxCell>
        
        <!-- Rancher Cluster 1 -->
        <mxCell id="rancher-1" value="Rancher Kubernetes Cluster" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#28a745;fontSize=14;fontStyle=1;verticalAlign=top;spacingTop=10;" vertex="1" parent="1">
          <mxGeometry x="130" y="190" width="440" height="220" as="geometry" />
        </mxCell>
        
        <!-- Rancher Cluster 2 -->
        <mxCell id="rancher-2" value="Rancher Kubernetes Cluster" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#28a745;fontSize=14;fontStyle=1;verticalAlign=top;spacingTop=10;" vertex="1" parent="1">
          <mxGeometry x="650" y="190" width="440" height="220" as="geometry" />
        </mxCell>
        
        <!-- Worker Nodes -->
        <mxCell id="worker-1" value="Worker Node 1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f5e8;strokeColor=#28a745;fontSize=11;fontStyle=1;verticalAlign=top;spacingTop=10;" vertex="1" parent="1">
          <mxGeometry x="150" y="230" width="120" height="160" as="geometry" />
        </mxCell>
        
        <mxCell id="worker-2" value="Worker Node 2" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f5e8;strokeColor=#28a745;fontSize=11;fontStyle=1;verticalAlign=top;spacingTop=10;" vertex="1" parent="1">
          <mxGeometry x="290" y="230" width="120" height="160" as="geometry" />
        </mxCell>
        
        <mxCell id="worker-3" value="Worker Node 3" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f5e8;strokeColor=#28a745;fontSize=11;fontStyle=1;verticalAlign=top;spacingTop=10;" vertex="1" parent="1">
          <mxGeometry x="430" y="230" width="120" height="160" as="geometry" />
        </mxCell>
        
        <mxCell id="worker-4" value="Worker Node 4" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f5e8;strokeColor=#28a745;fontSize=11;fontStyle=1;verticalAlign=top;spacingTop=10;" vertex="1" parent="1">
          <mxGeometry x="670" y="230" width="120" height="160" as="geometry" />
        </mxCell>
        
        <mxCell id="worker-5" value="Worker Node 5" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f5e8;strokeColor=#28a745;fontSize=11;fontStyle=1;verticalAlign=top;spacingTop=10;" vertex="1" parent="1">
          <mxGeometry x="810" y="230" width="120" height="160" as="geometry" />
        </mxCell>
        
        <mxCell id="worker-6" value="Worker Node 6" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f5e8;strokeColor=#28a745;fontSize=11;fontStyle=1;verticalAlign=top;spacingTop=10;" vertex="1" parent="1">
          <mxGeometry x="950" y="230" width="120" height="160" as="geometry" />
        </mxCell>
        
        <!-- Consul Server Pods -->
        <mxCell id="consul-server-1" value="Consul Server Pod" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dc3545;strokeColor=#dc3545;fontSize=9;fontColor=white;" vertex="1" parent="1">
          <mxGeometry x="155" y="260" width="110" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="consul-server-2" value="Consul Server Pod" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dc3545;strokeColor=#dc3545;fontSize=9;fontColor=white;" vertex="1" parent="1">
          <mxGeometry x="295" y="260" width="110" height="25" as="geometry" />
        </mxCell>
        
        <mxCell id="consul-server-3" value="Consul Server Pod" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dc3545;strokeColor=#dc3545;fontSize=9;fontColor=white;" vertex="1" parent="1">
          <mxGeometry x="435" y="260" width="110" height="25" as="geometry" />
        </mxCell>
        
        <!-- Consul Client Agents -->
        <mxCell id="consul-client-1" value="Consul Client Agent" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#6c757d;strokeColor=#6c757d;fontSize=8;fontColor=white;" vertex="1" parent="1">
          <mxGeometry x="155" y="290" width="110" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="consul-client-2" value="Consul Client Agent" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#6c757d;strokeColor=#6c757d;fontSize=8;fontColor=white;" vertex="1" parent="1">
          <mxGeometry x="295" y="290" width="110" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="consul-client-3" value="Consul Client Agent" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#6c757d;strokeColor=#6c757d;fontSize=8;fontColor=white;" vertex="1" parent="1">
          <mxGeometry x="435" y="290" width="110" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="consul-client-4" value="Consul Client Agent" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#6c757d;strokeColor=#6c757d;fontSize=8;fontColor=white;" vertex="1" parent="1">
          <mxGeometry x="675" y="290" width="110" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="consul-client-5" value="Consul Client Agent" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#6c757d;strokeColor=#6c757d;fontSize=8;fontColor=white;" vertex="1" parent="1">
          <mxGeometry x="815" y="290" width="110" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="consul-client-6" value="Consul Client Agent" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#6c757d;strokeColor=#6c757d;fontSize=8;fontColor=white;" vertex="1" parent="1">
          <mxGeometry x="955" y="290" width="110" height="20" as="geometry" />
        </mxCell>
        
        <!-- Spring Boot Applications -->
        <mxCell id="spring-app-1" value="Spring Boot App 1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#17a2b8;strokeColor=#17a2b8;fontSize=8;fontColor=white;" vertex="1" parent="1">
          <mxGeometry x="155" y="320" width="110" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="spring-app-2" value="Spring Boot App 2" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#17a2b8;strokeColor=#17a2b8;fontSize=8;fontColor=white;" vertex="1" parent="1">
          <mxGeometry x="295" y="320" width="110" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="spring-app-3" value="Spring Boot App 3" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#17a2b8;strokeColor=#17a2b8;fontSize=8;fontColor=white;" vertex="1" parent="1">
          <mxGeometry x="435" y="320" width="110" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="spring-app-4" value="Spring Boot App 4" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#17a2b8;strokeColor=#17a2b8;fontSize=8;fontColor=white;" vertex="1" parent="1">
          <mxGeometry x="675" y="320" width="110" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="spring-app-5" value="Spring Boot App 5" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#17a2b8;strokeColor=#17a2b8;fontSize=8;fontColor=white;" vertex="1" parent="1">
          <mxGeometry x="815" y="320" width="110" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="spring-app-6" value="Spring Boot App 6" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#17a2b8;strokeColor=#17a2b8;fontSize=8;fontColor=white;" vertex="1" parent="1">
          <mxGeometry x="955" y="320" width="110" height="20" as="geometry" />
        </mxCell>
        
        <!-- Spring Cloud SDK -->
        <mxCell id="spring-sdk-1" value="Spring Cloud SDK" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fd7e14;strokeColor=#fd7e14;fontSize=7;fontColor=white;" vertex="1" parent="1">
          <mxGeometry x="155" y="345" width="110" height="15" as="geometry" />
        </mxCell>
        
        <mxCell id="spring-sdk-2" value="Spring Cloud SDK" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fd7e14;strokeColor=#fd7e14;fontSize=7;fontColor=white;" vertex="1" parent="1">
          <mxGeometry x="295" y="345" width="110" height="15" as="geometry" />
        </mxCell>
        
        <mxCell id="spring-sdk-3" value="Spring Cloud SDK" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fd7e14;strokeColor=#fd7e14;fontSize=7;fontColor=white;" vertex="1" parent="1">
          <mxGeometry x="435" y="345" width="110" height="15" as="geometry" />
        </mxCell>
        
        <mxCell id="spring-sdk-4" value="Spring Cloud SDK" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fd7e14;strokeColor=#fd7e14;fontSize=7;fontColor=white;" vertex="1" parent="1">
          <mxGeometry x="675" y="345" width="110" height="15" as="geometry" />
        </mxCell>
        
        <mxCell id="spring-sdk-5" value="Spring Cloud SDK" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fd7e14;strokeColor=#fd7e14;fontSize=7;fontColor=white;" vertex="1" parent="1">
          <mxGeometry x="815" y="345" width="110" height="15" as="geometry" />
        </mxCell>
        
        <mxCell id="spring-sdk-6" value="Spring Cloud SDK" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fd7e14;strokeColor=#fd7e14;fontSize=7;fontColor=white;" vertex="1" parent="1">
          <mxGeometry x="955" y="345" width="110" height="15" as="geometry" />
        </mxCell>
        
        <!-- Harness Pipeline -->
        <mxCell id="harness-pipeline" value="Harness CI/CD Pipeline" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8f9fa;strokeColor=#6f42c1;fontSize=14;fontStyle=1;verticalAlign=top;spacingTop=10;" vertex="1" parent="1">
          <mxGeometry x="110" y="450" width="1000" height="80" as="geometry" />
        </mxCell>
        
        <mxCell id="harness-source" value="Source Control" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#6f42c1;strokeColor=#6f42c1;fontSize=10;fontColor=white;" vertex="1" parent="1">
          <mxGeometry x="130" y="485" width="150" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="harness-build" value="Build &amp; Test" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#6f42c1;strokeColor=#6f42c1;fontSize=10;fontColor=white;" vertex="1" parent="1">
          <mxGeometry x="300" y="485" width="150" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="harness-deploy" value="Deploy to Rancher" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#6f42c1;strokeColor=#6f42c1;fontSize=10;fontColor=white;" vertex="1" parent="1">
          <mxGeometry x="470" y="485" width="150" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="harness-register" value="Service Registration" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#6f42c1;strokeColor=#6f42c1;fontSize=10;fontColor=white;" vertex="1" parent="1">
          <mxGeometry x="640" y="485" width="150" height="30" as="geometry" />
        </mxCell>
        
        <mxCell id="harness-health" value="Health Checks" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#6f42c1;strokeColor=#6f42c1;fontSize=10;fontColor=white;" vertex="1" parent="1">
          <mxGeometry x="810" y="485" width="150" height="30" as="geometry" />
        </mxCell>
        
        <!-- Load Balancer -->
        <mxCell id="alb" value="Application Load Balancer (ALB)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#20c997;strokeColor=#20c997;fontSize=12;fontStyle=1;fontColor=white;" vertex="1" parent="1">
          <mxGeometry x="450" y="560" width="300" height="40" as="geometry" />
        </mxCell>
        
        <!-- Internet Gateway -->
        <mxCell id="igw" value="Internet Gateway" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#17a2b8;strokeColor=#17a2b8;fontSize=11;fontColor=white;" vertex="1" parent="1">
          <mxGeometry x="520" y="640" width="160" height="30" as="geometry" />
        </mxCell>
        
        <!-- Flow Arrows -->
        <!-- Consul Server Communication -->
        <mxCell id="raft-flow" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#dc3545;strokeWidth=2;dashed=1;" edge="1" parent="1" source="consul-server-1" target="consul-server-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="raft-label" value="Raft Consensus" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=8;fontColor=#dc3545;" vertex="1" parent="1">
          <mxGeometry x="200" y="245" width="80" height="10" as="geometry" />
        </mxCell>
        
        <mxCell id="gossip-flow" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#dc3545;strokeWidth=2;dashed=1;" edge="1" parent="1" source="consul-server-2" target="consul-server-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="gossip-label" value="Gossip Protocol" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=8;fontColor=#dc3545;" vertex="1" parent="1">
          <mxGeometry x="340" y="315" width="80" height="10" as="geometry" />
        </mxCell>
        
        <!-- Service Registration Flow -->
        <mxCell id="reg-flow-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#fd7e14;strokeWidth=2;" edge="1" parent="1" source="spring-sdk-1" target="consul-client-1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="reg-flow-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;strokeColor=#fd7e14;strokeWidth=2;" edge="1" parent="1" source="spring-sdk-2" target="consul-client-2">
